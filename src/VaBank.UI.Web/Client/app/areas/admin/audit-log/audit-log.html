<section class="row offset-bottom">
    <div class="col-xs-10">
        <div class="form-inline">
            <div class="form-group from-filter">
                <label>От</label>
                <vb-datepicker data-ng-model="filter.from.value" data-config="{minView: 'day'}" data-date-format="YYYY-MM-DD"></vb-datepicker>
            </div>
            <div class="form-group to-filter">
                <label>До</label>
                <vb-datepicker data-ng-model="filter.to.value" data-config="{minView: 'day'}" data-date-format="YYYY-MM-DD"></vb-datepicker>
            </div>
            <div class="form-group">
                <label>Коды</label>
                <div data-multi-select
                     input-model="lookup.codes"
                     default-label="Любой"
                     button-label="label"
                     item-label="label"
                     tick-property="ticked"
                     helper-elements="all reset"
                     max-labels="1">
                </div>
            </div>
            <div class="form-group">
                <label>Пользователь</label>
            </div>
        </div>
    </div>
    <div class="col-xs-2">
        <div class="btn-toolbar pull-right" role="toolbar">
            <button class="btn btn-primary" ng-click="show()">Показать</button>
        </div>
    </div>
</section>
<section class="row">
    <div class="col-xs-12">
        <table class="table table-responsive"
               st-table="displayedLogs"
               st-safe-src="logs">
            <thead>
                <tr>
                    <th></th>
                    <th>Время</th>
                    <th>Код</th>
                    <th>Описание</th>
                </tr>
            </thead>
            <tbody data-ng-repeat="log in displayedLogs">
                <tr class="active" st-select-row="log">
                    <td colspan="4">
                        <div class="row">
                            <div class="col-xs-7">
                                <b class="text-primary">
                                    <span class="badge">A</span> Операция №{{log.operationId}}  
                                </b>
                            </div>
                            <div class="col-xs-3">
                                <div class="pull-right text-primary">
                                    <i class="glyphicon glyphicon-time"></i>
                                    {{log.startedUtc | date }}
                                </div>
                            </div>
                            <div class="col-xs-2">
                                <div class="pull-right">
                                    <span class="label label-info" ng-show="log.userName">{{log.userName}}</span>
                                    <span class="label label-default" ng-show="log.applicationId">{{log.applicationId}}</span>
                                </div>      
                            </div>
                        </div>
                    </td>
                </tr>
                <tr data-ng-repeat="appAction in log.appActions">
                    <td class="switch-audit-view text-center" ng-if="$index === 0" rowspan="{{log.appActions.length}}">
                        <a><i class="glyphicon glyphicon-retweet"></i></a>
                    </td>
                    <td>{{appAction.timestampUtc | date}}</td>
                    <td>{{appAction.code}}</td>
                    <td>{{appAction.description}}</td>
                </tr>
            </tbody>
            
        </table>
    </div>
</section>